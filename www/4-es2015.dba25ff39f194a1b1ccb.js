(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{FH9X:function(l,n,t){"use strict";t.r(n);var i=t("8Y7J"),u=t("mrSG"),e=t("S3Px"),o=t("2Rin"),r=t("ZZ/e"),s=t("34Y5");class c{constructor(l,n,t,i,u){this.productsService=l,this.navCtrl=n,this.storage=t,this.modalCtrl=i,this.utilService=u,this.slides=["http://cdn.gxyingken.com/banner_1.jpg?imageView2/2/w/720/q/60","http://cdn.gxyingken.com/banner_2.jpg?imageView2/2/w/720/q/60"],this.slideOpts={autoplay:!0,loop:!0,slidesPerView:"auto",centeredSlides:!0},this.infiniteScroll=null,this.last=!1,this.page=1}ngOnInit(){return u.b(this,void 0,void 0,(function*(){const l=yield this.utilService.showLoading();this.getProductList("",1).subscribe(n=>u.b(this,void 0,void 0,(function*(){l.dismiss(),0===n.code&&(this.products=n.data)})),l=>{this.errorMessage=l,this.utilService.showToast(l)})}))}getProductList(l,n){return this.productsService.getProductList(l,n)}goToDetail(l){this.navCtrl.navigateForward(["/detail"],{queryParams:{id:l._id}})}login(){this.storage.get("user").then(l=>u.b(this,void 0,void 0,(function*(){null!=l?this.navCtrl.navigateRoot("/tabs/profile"):(yield this.modalCtrl.create({component:s.a})).present()})))}goToProductList(l){this.navCtrl.navigateRoot("/tabs/mall")}doRefresh(l){return u.b(this,void 0,void 0,(function*(){this.page=1;const n=yield this.utilService.showLoading();this.getProductList("",this.page).subscribe(t=>{0===t.code&&(this.last=t.isLast,this.products=t.data,this.infiniteScroll&&(this.infiniteScroll.target.disabled=!1),l.target.complete()),n.dismiss()},l=>{this.errorMessage=l,this.utilService.showToast(l)})}))}doInfinite(l){return u.b(this,void 0,void 0,(function*(){this.page++,this.infiniteScroll=l;const n=yield this.utilService.showLoading();this.getProductList("",this.page).subscribe(t=>{0===t.code&&(this.last=t.isLast,this.products=this.products.concat(t.data),this.products.concat(t.data),l.target.complete(),this.last&&(l.target.disabled=!0)),n.dismiss()},l=>{this.errorMessage=l,this.utilService.showToast(l)})}))}}class a{}var b=t("pMnS"),d=t("oBZk"),h=t("s7LF"),p=t("SVse"),g=t("xgBC"),x=i.pb({encapsulation:0,styles:[[".logo[_ngcontent-%COMP%]{font-weight:700}.avatar[_ngcontent-%COMP%]{width:30px;height:30px}.slides[_ngcontent-%COMP%]{width:100%}.slide[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;-webkit-transition:.4s;transition:.4s;-webkit-transform:scale(1);transform:scale(1);border-radius:5px;overflow:hidden}.slide.swiper-slide-active[_ngcontent-%COMP%]{-webkit-transform:scale(1);transform:scale(1)}.title[_ngcontent-%COMP%]{margin-top:10px}.item-body[_ngcontent-%COMP%]{box-shadow:none;--background:#fff;margin:0;border-radius:3px}.name[_ngcontent-%COMP%]{height:52px;overflow:hidden;color:#555;padding:10px;line-height:20px;margin-bottom:15px}.price[_ngcontent-%COMP%]{padding:0 10px}.old-price[_ngcontent-%COMP%]{padding:0 10px;display:block;margin-bottom:10px;line-height:25px;color:#acacac}"]],data:{}});function m(l){return i.Lb(0,[(l()(),i.rb(0,0,null,null,2,"ion-slide",[["class","slide"]],null,null,null,d.pb,d.D)),i.qb(1,49152,null,0,r.rb,[i.h,i.k,i.x],null,null),(l()(),i.rb(2,0,null,0,0,"img",[["alt",""]],[[8,"src",4]],null,null,null,null))],null,(function(l,n){l(n,2,0,i.vb(1,"",n.context.$implicit,""))}))}function f(l){return i.Lb(0,[(l()(),i.rb(0,0,null,null,13,"ion-col",[["class","list-item"],["size","6"]],null,null,null,d.T,d.h)),i.qb(1,49152,null,0,r.u,[i.h,i.k,i.x],{size:[0,"size"]},null),(l()(),i.rb(2,0,null,0,11,"ion-card",[["class","item-body"]],null,[[null,"click"]],(function(l,n,t){var i=!0;return"click"===n&&(i=!1!==l.component.goToDetail(l.context.$implicit)&&i),i}),d.S,d.g)),i.qb(3,49152,null,0,r.n,[i.h,i.k,i.x],null,null),(l()(),i.rb(4,0,null,0,0,"img",[["alt",""],["height","147"],["width","100%"]],[[8,"src",4]],null,null,null,null)),(l()(),i.rb(5,0,null,0,1,"p",[["class","name"]],null,null,null,null,null)),(l()(),i.Jb(6,null,["",""])),(l()(),i.rb(7,0,null,0,4,"p",[["class","price"]],null,null,null,null,null)),(l()(),i.Jb(-1,null,["\uffe5"])),(l()(),i.rb(9,0,null,null,1,"span",[["class","red"]],null,null,null,null,null)),(l()(),i.Jb(10,null,["",""])),(l()(),i.Jb(11,null,["/",""])),(l()(),i.rb(12,0,null,0,1,"del",[["class","old-price"]],null,null,null,null,null)),(l()(),i.Jb(13,null,["\uffe5","/",""]))],(function(l,n){l(n,1,0,"6")}),(function(l,n){l(n,4,0,i.vb(1,"",null==n.context.$implicit?null:n.context.$implicit.banner.path,"")),l(n,6,0,null==n.context.$implicit?null:n.context.$implicit.name),l(n,10,0,null==n.context.$implicit?null:n.context.$implicit.price),l(n,11,0,null==n.context.$implicit?null:n.context.$implicit.unit),l(n,13,0,null==n.context.$implicit?null:n.context.$implicit.origin_price,null==n.context.$implicit?null:n.context.$implicit.origin_price_unit)}))}function v(l){return i.Lb(0,[(l()(),i.rb(0,0,null,null,17,"ion-header",[],null,null,null,d.Z,d.n)),i.qb(1,49152,null,0,r.C,[i.h,i.k,i.x],null,null),(l()(),i.rb(2,0,null,0,15,"ion-toolbar",[["class","toolbar"]],null,null,null,d.xb,d.L)),i.qb(3,49152,null,0,r.Db,[i.h,i.k,i.x],null,null),(l()(),i.rb(4,0,null,0,4,"ion-buttons",[["slot","secondary"]],null,null,null,d.R,d.f)),i.qb(5,49152,null,0,r.m,[i.h,i.k,i.x],null,null),(l()(),i.rb(6,0,null,0,2,"ion-button",[["class","logo"]],null,null,null,d.Q,d.e)),i.qb(7,49152,null,0,r.l,[i.h,i.k,i.x],null,null),(l()(),i.Jb(-1,0,["\u76c8\u57a6"])),(l()(),i.rb(9,0,null,0,3,"ion-searchbar",[["placeholder","\u8f93\u5165\u4f60\u8981\u641c\u7d22\u7684\u5546\u54c1"]],null,[[null,"keyup"],[null,"ionBlur"],[null,"ionChange"]],(function(l,n,t){var u=!0,e=l.component;return"ionBlur"===n&&(u=!1!==i.Db(l,12)._handleBlurEvent(t.target)&&u),"ionChange"===n&&(u=!1!==i.Db(l,12)._handleInputEvent(t.target)&&u),"keyup"===n&&(u=!1!==e.goToProductList(t)&&u),u}),d.kb,d.y)),i.Gb(5120,null,h.h,(function(l){return[l]}),[r.Ob]),i.qb(11,49152,null,0,r.lb,[i.h,i.k,i.x],{placeholder:[0,"placeholder"]},null),i.qb(12,16384,null,0,r.Ob,[i.k],null,null),(l()(),i.rb(13,0,null,0,4,"ion-buttons",[["slot","primary"]],null,null,null,d.R,d.f)),i.qb(14,49152,null,0,r.m,[i.h,i.k,i.x],null,null),(l()(),i.rb(15,0,null,0,2,"ion-avatar",[["class","avatar"]],null,[[null,"click"]],(function(l,n,t){var i=!0;return"click"===n&&(i=!1!==l.component.login()&&i),i}),d.N,d.b)),i.qb(16,49152,null,0,r.g,[i.h,i.k,i.x],null,null),(l()(),i.rb(17,0,null,0,0,"img",[["src","../../assets/images/avatar.png"]],null,null,null,null,null)),(l()(),i.rb(18,0,null,null,21,"ion-content",[["class","content"]],null,null,null,d.U,d.i)),i.qb(19,49152,null,0,r.v,[i.h,i.k,i.x],null,null),(l()(),i.rb(20,0,null,0,3,"ion-refresher",[["pullFactor","0.5"],["slot","fixed"]],null,[[null,"ionRefresh"]],(function(l,n,t){var i=!0;return"ionRefresh"===n&&(i=!1!==l.component.doRefresh(t)&&i),i}),d.ib,d.v)),i.qb(21,49152,null,0,r.eb,[i.h,i.k,i.x],{pullFactor:[0,"pullFactor"]},null),(l()(),i.rb(22,0,null,0,1,"ion-refresher-content",[],null,null,null,d.hb,d.w)),i.qb(23,49152,null,0,r.fb,[i.h,i.k,i.x],null,null),(l()(),i.rb(24,0,null,0,3,"ion-slides",[["class","slides"],["pager","true"]],null,null,null,d.qb,d.E)),i.qb(25,49152,null,0,r.sb,[i.h,i.k,i.x],{options:[0,"options"],pager:[1,"pager"]},null),(l()(),i.gb(16777216,null,0,1,null,m)),i.qb(27,278528,null,0,p.i,[i.M,i.J,i.q],{ngForOf:[0,"ngForOf"]},null),(l()(),i.rb(28,0,null,0,1,"h2",[["class","title"]],null,null,null,null,null)),(l()(),i.Jb(-1,null,["\u70ed\u9500\u5546\u54c1"])),(l()(),i.rb(30,0,null,0,5,"ion-grid",[],null,null,null,d.Y,d.m)),i.qb(31,49152,null,0,r.B,[i.h,i.k,i.x],null,null),(l()(),i.rb(32,0,null,0,3,"ion-row",[],null,null,null,d.jb,d.x)),i.qb(33,49152,null,0,r.kb,[i.h,i.k,i.x],null,null),(l()(),i.gb(16777216,null,0,1,null,f)),i.qb(35,278528,null,0,p.i,[i.M,i.J,i.q],{ngForOf:[0,"ngForOf"]},null),(l()(),i.rb(36,0,null,0,3,"ion-infinite-scroll",[["threshold","100px"]],null,[[null,"ionInfinite"]],(function(l,n,t){var i=!0;return"ionInfinite"===n&&(i=!1!==l.component.doInfinite(t)&&i),i}),d.cb,d.p)),i.qb(37,49152,null,0,r.F,[i.h,i.k,i.x],{threshold:[0,"threshold"]},null),(l()(),i.rb(38,0,null,0,1,"ion-infinite-scroll-content",[["loadingSpinner","bubbles"],["loadingText","\u52a0\u8f7d\u66f4\u591a\u4e2d..."]],null,null,null,d.bb,d.q)),i.qb(39,49152,null,0,r.G,[i.h,i.k,i.x],{loadingSpinner:[0,"loadingSpinner"],loadingText:[1,"loadingText"]},null)],(function(l,n){var t=n.component;l(n,11,0,"\u8f93\u5165\u4f60\u8981\u641c\u7d22\u7684\u5546\u54c1"),l(n,21,0,"0.5"),l(n,25,0,t.slideOpts,"true"),l(n,27,0,t.slides),l(n,35,0,t.products),l(n,37,0,"100px"),l(n,39,0,"bubbles","\u52a0\u8f7d\u66f4\u591a\u4e2d...")}),null)}function k(l){return i.Lb(0,[(l()(),i.rb(0,0,null,null,1,"app-index",[],null,null,null,v,x)),i.qb(1,114688,null,0,c,[e.a,r.Jb,g.b,r.Ib,o.a],null,null)],(function(l,n){l(n,1,0)}),null)}var w=i.nb("app-index",c,k,{},{},[]),q=t("iInd");t.d(n,"IndexPageModuleNgFactory",(function(){return S}));var S=i.ob(a,[],(function(l){return i.Ab([i.Bb(512,i.j,i.Z,[[8,[b.a,w]],[3,i.j],i.v]),i.Bb(4608,p.l,p.k,[i.s,[2,p.r]]),i.Bb(4608,h.p,h.p,[]),i.Bb(4608,r.b,r.b,[i.x,i.g]),i.Bb(4608,r.Ib,r.Ib,[r.b,i.j,i.p]),i.Bb(4608,r.Lb,r.Lb,[r.b,i.j,i.p]),i.Bb(1073742336,p.b,p.b,[]),i.Bb(1073742336,h.o,h.o,[]),i.Bb(1073742336,h.e,h.e,[]),i.Bb(1073742336,r.Fb,r.Fb,[]),i.Bb(1073742336,q.o,q.o,[[2,q.t],[2,q.m]]),i.Bb(1073742336,a,a,[]),i.Bb(1024,q.k,(function(){return[[{path:"",component:c}]]}),[])])}))}}]);