(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"F/Pw":function(l,n,t){"use strict";t.r(n);var u=t("CcnG"),e=t("mrSG"),i=t("34Y5"),o=t("ZZ/e"),r=t("kVqo"),s=t("2Rin"),b=function(){function l(l,n,t,u,o,r){var s=this;this.storage=l,this.modalCtrl=n,this.navCtrl=t,this.utilService=u,this.activeRoute=o,this.ordersService=r,this.orders=[],this.selected=0,this.page=1,this.last=!1,this.activeRoute.queryParams.subscribe((function(l){void 0!==l.selectedTab&&(s.selected=l.selectedTab)})),this.storage.get("user").then((function(l){return e.b(s,void 0,void 0,(function(){return e.e(this,(function(n){switch(n.label){case 0:return null!=l?[3,2]:[4,this.modalCtrl.create({component:i.a})];case 1:return n.sent().present(),this.navCtrl.navigateRoot("/tabs/index"),[3,3];case 2:this.userId=l._id,this.getOrderList(this.selected),n.label=3;case 3:return[2]}}))}))}))}return l.prototype.ngOnInit=function(){},l.prototype.segmentChanged=function(l){this.selected=l.detail.value,this.last=!1,this.page=1,void 0!==this.infiniteScroll&&(this.infiniteScroll.target.disabled=!1),this.getOrderList(l.detail.value)},l.prototype.getOrderList=function(l){var n=this;this.ordersService.httpGetOrderById(this.userId).subscribe((function(t){0===t.code&&(n.orders=t.orders,0==l?n.orders=n.orders.filter((function(l){return 0==l.status})):1==l?n.orders=n.orders.filter((function(l){return 1==l.status})):2==l?n.orders=n.orders.filter((function(l){return 2==l.status})):3==l&&(n.orders=n.orders.filter((function(l){return 1e3!=l.status}))),n.orders.map((function(l){l.products=JSON.parse(l.products),0===l.status?l.orderStatusText="\u5f85\u652f\u4ed8":1===l.status?l.orderStatusText="\u5df1\u4ed8\u6b3e\uff0c\u5f85\u53d1\u8d27":2===l.status?l.orderStatusText="\u5df1\u53d1\u8d27":1e3===l.status&&(l.orderStatusText="\u5df1\u5220\u9664")})))}))},l.prototype.goToPay=function(l){this.storage.set("orders",l.products),this.storage.set("sn",l.sn),this.storage.set("no",l._id),this.navCtrl.navigateForward("/pay-order")},l.prototype.delOrder=function(l){var n=this;this.utilService.alert("\u786e\u8ba4\u5220\u9664\u8be5\u8ba2\u5355\uff1f",(function(t){n.ordersService.httpDelOrder(l).subscribe((function(l){0===l.code?n.getOrderList(n.selected):(n.getOrderList(n.selected),n.utilService.showToast(l.msg))}))}))},l.prototype.doInfinite=function(l){return e.b(this,void 0,void 0,(function(){var n,t=this;return e.e(this,(function(u){switch(u.label){case 0:return this.page++,this.infiniteScroll=l,[4,this.utilService.showLoading()];case 1:return n=u.sent(),this.ordersService.httpGetOrderById(this.userId,this.page).subscribe((function(u){0===u.code&&(t.orders=t.orders.concat(u.orders),t.orders.map((function(l){"string"==typeof l.products&&(l.products=JSON.parse(l.products)),0===l.status?l.orderStatusText="\u5f85\u652f\u4ed8":1===l.status?l.orderStatusText="\u5df1\u4ed8\u6b3e\uff0c\u5f85\u53d1\u8d27":2===l.status?l.orderStatusText="\u5df1\u53d1\u8d27":1e3===l.status&&(l.orderStatusText="\u5df1\u5220\u9664")})),t.last=u.isLast,0==t.selected?t.orders=t.orders.filter((function(l){return 0==l.status})):1==t.selected?t.orders=t.orders.filter((function(l){return 1==l.status})):2==t.selected?t.orders=t.orders.filter((function(l){return 2==l.status})):3==t.selected&&(t.orders=t.orders.filter((function(l){return 1e3!=l.status}))),l.target.complete(),t.last&&(l.target.disabled=!0)),n.dismiss()}),(function(l){t.errorMessage=l,t.utilService.showToast(l)})),[2]}}))}))},l}(),c=function(){return function(){}}(),a=t("pMnS"),d=t("oBZk"),h=t("Ip0R"),f=t("ZYCi"),p=t("gIcY"),g=t("iw74"),m=u.rb({encapsulation:0,styles:[[".order-item[_ngcontent-%COMP%]{color:#555;font-size:14px;margin-bottom:15px}.header-item[_ngcontent-%COMP%], .order-footer[_ngcontent-%COMP%]{color:#555;font-size:14px}.header-item[_ngcontent-%COMP%]   b[_ngcontent-%COMP%], .order-footer[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{font-size:14px}.order-footer[_ngcontent-%COMP%]{--border-color:#f2f2f2}.list-item[_ngcontent-%COMP%]{padding:8px 0}.date[_ngcontent-%COMP%]{color:#999}.product-list[_ngcontent-%COMP%]{margin-bottom:0}.product-name[_ngcontent-%COMP%]{font-size:13px;line-height:20px;font-weight:400}.price-box[_ngcontent-%COMP%]{font-size:12px;color:#999}.price-box[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{font-size:12px}"]],data:{}});function v(l){return u.Nb(0,[(l()(),u.tb(0,0,null,null,1,"div",[["class","no-data"]],null,null,null,null,null)),(l()(),u.Lb(-1,null,[" \u6ca1\u6709\u4efb\u4f55\u8ba2\u5355\uff5e "]))],null,null)}function k(l){return u.Nb(0,[(l()(),u.tb(0,0,null,null,22,"ion-item",[["class","list-item"],["lines","none"]],null,null,null,d.eb,d.s)),u.sb(1,49152,null,0,o.I,[u.h,u.k,u.z],{lines:[0,"lines"]},null),(l()(),u.tb(2,0,null,0,2,"ion-thumbnail",[["item-start",""]],null,null,null,d.vb,d.J)),u.sb(3,49152,null,0,o.Ab,[u.h,u.k,u.z],null,null),(l()(),u.tb(4,0,null,0,0,"img",[],[[8,"src",4]],null,null,null,null)),(l()(),u.tb(5,0,null,0,17,"div",[["class","price-box"],["style","flex: 1;"]],null,null,null,null,null)),(l()(),u.tb(6,0,null,null,1,"h2",[["class","product-name"]],null,null,null,null,null)),(l()(),u.Lb(7,null,["",""])),(l()(),u.tb(8,0,null,null,14,"ion-row",[],null,null,null,d.jb,d.x)),u.sb(9,49152,null,0,o.kb,[u.h,u.k,u.z],null,null),(l()(),u.tb(10,0,null,0,4,"ion-col",[],null,null,null,d.T,d.h)),u.sb(11,49152,null,0,o.u,[u.h,u.k,u.z],null,null),(l()(),u.tb(12,0,null,0,2,"p",[["text-right",""]],null,null,null,null,null)),u.sb(13,16384,null,0,o.d,[u.k],null,null),(l()(),u.Lb(14,null,["x ",""])),(l()(),u.tb(15,0,null,0,7,"ion-col",[["col-2",""]],null,null,null,d.T,d.h)),u.sb(16,49152,null,0,o.u,[u.h,u.k,u.z],null,null),(l()(),u.tb(17,0,null,0,5,"p",[["text-right",""]],null,null,null,null,null)),u.sb(18,16384,null,0,o.d,[u.k],null,null),(l()(),u.Lb(-1,null,["\uffe5"])),(l()(),u.tb(20,0,null,null,1,"b",[["class","red"]],null,null,null,null,null)),(l()(),u.Lb(21,null,["",""])),(l()(),u.Lb(-1,null,["\u5143"]))],(function(l,n){l(n,1,0,"none")}),(function(l,n){l(n,4,0,u.xb(1,"",n.context.$implicit.product.banner.path,"")),l(n,7,0,n.context.$implicit.product.name),l(n,14,0,n.context.$implicit.num?n.context.$implicit.num:0),l(n,21,0,((n.context.$implicit.num?n.context.$implicit.num:0)*n.context.$implicit.product.price).toFixed(2))}))}function x(l){return u.Nb(0,[(l()(),u.tb(0,0,null,null,3,"ion-list",[["class","product-list"],["lines","none"]],null,null,null,d.gb,d.u)),u.sb(1,49152,null,0,o.P,[u.h,u.k,u.z],{lines:[0,"lines"]},null),(l()(),u.ib(16777216,null,0,1,null,k)),u.sb(3,278528,null,0,h.i,[u.O,u.L,u.s],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,1,0,"none"),l(n,3,0,n.parent.context.$implicit.products)}),null)}function O(l){return u.Nb(0,[(l()(),u.tb(0,0,null,null,2,"ion-button",[],null,[[null,"click"]],(function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.goToPay(l.parent.context.$implicit)&&u),u}),d.Q,d.e)),u.sb(1,49152,null,0,o.l,[u.h,u.k,u.z],null,null),(l()(),u.Lb(-1,0,["\u7ee7\u7eed\u652f\u4ed8"]))],null,null)}function z(l){return u.Nb(0,[(l()(),u.tb(0,0,null,null,29,"div",[["class","order-item"]],null,null,null,null,null)),(l()(),u.tb(1,0,null,null,7,"ion-item",[["class","header-item"],["lines","none"]],null,null,null,d.eb,d.s)),u.sb(2,49152,null,0,o.I,[u.h,u.k,u.z],{lines:[0,"lines"]},null),(l()(),u.tb(3,0,null,0,2,"ion-label",[],null,null,null,d.fb,d.t)),u.sb(4,49152,null,0,o.O,[u.h,u.k,u.z],null,null),(l()(),u.Lb(5,0,["",""])),(l()(),u.tb(6,0,null,0,2,"div",[["class","date"],["item-end",""]],null,null,null,null,null)),(l()(),u.Lb(7,null,["",""])),u.Hb(8,2),(l()(),u.ib(16777216,null,null,1,null,x)),u.sb(10,16384,null,0,h.j,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.tb(11,0,null,null,9,"ion-item",[["class","order-footer"],["lines","full"]],null,null,null,d.eb,d.s)),u.sb(12,49152,null,0,o.I,[u.h,u.k,u.z],{lines:[0,"lines"]},null),(l()(),u.tb(13,0,null,0,2,"ion-label",[["class","status"]],null,null,null,d.fb,d.t)),u.sb(14,49152,null,0,o.O,[u.h,u.k,u.z],null,null),(l()(),u.Lb(15,0,["",""])),(l()(),u.tb(16,0,null,0,4,"div",[["class","sum"],["item-end",""]],null,null,null,null,null)),(l()(),u.Lb(-1,null,["\u603b\u4ef7 "])),(l()(),u.tb(18,0,null,null,1,"b",[["class","red"]],null,null,null,null,null)),(l()(),u.Lb(19,null,["\uffe5",""])),(l()(),u.Lb(-1,null,["\u5143"])),(l()(),u.tb(21,0,null,null,8,"ion-toolbar",[],null,null,null,d.xb,d.L)),u.sb(22,49152,null,0,o.Db,[u.h,u.k,u.z],null,null),(l()(),u.tb(23,0,null,0,6,"ion-buttons",[["slot","primary"]],null,null,null,d.R,d.f)),u.sb(24,49152,null,0,o.m,[u.h,u.k,u.z],null,null),(l()(),u.ib(16777216,null,0,1,null,O)),u.sb(26,16384,null,0,h.j,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.tb(27,0,null,0,2,"ion-button",[],null,[[null,"click"]],(function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.delOrder(l.context.$implicit._id)&&u),u}),d.Q,d.e)),u.sb(28,49152,null,0,o.l,[u.h,u.k,u.z],null,null),(l()(),u.Lb(-1,0,["\u5220\u9664"]))],(function(l,n){var t=n.component;l(n,2,0,"none"),l(n,10,0,t.orders.length>0),l(n,12,0,"full"),l(n,26,0,0==n.context.$implicit.status)}),(function(l,n){l(n,5,0,n.context.$implicit.sn);var t=u.Mb(n,7,0,l(n,8,0,u.Fb(n.parent,0),n.context.$implicit.createdAt,"yyyy-MM-dd HH:mm:ss"));l(n,7,0,t),l(n,15,0,n.context.$implicit.orderStatusText);var e=n.context.$implicit.sumPrice.toFixed(2);l(n,19,0,e)}))}function L(l){return u.Nb(0,[u.Gb(0,h.d,[u.u]),(l()(),u.tb(1,0,null,null,18,"ion-header",[],null,null,null,d.Z,d.n)),u.sb(2,49152,null,0,o.C,[u.h,u.k,u.z],null,null),(l()(),u.tb(3,0,null,0,16,"ion-toolbar",[["class","toolbar"]],null,null,null,d.xb,d.L)),u.sb(4,49152,null,0,o.Db,[u.h,u.k,u.z],null,null),(l()(),u.tb(5,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,d.R,d.f)),u.sb(6,49152,null,0,o.m,[u.h,u.k,u.z],null,null),(l()(),u.tb(7,0,null,0,2,"ion-back-button",[["mode","md"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==u.Fb(l,9).onClick(t)&&e),e}),d.O,d.c)),u.sb(8,49152,null,0,o.h,[u.h,u.k,u.z],{mode:[0,"mode"]},null),u.sb(9,16384,null,0,o.i,[[2,o.jb],o.Jb],null,null),(l()(),u.tb(10,0,null,0,2,"ion-title",[],null,null,null,d.wb,d.K)),u.sb(11,49152,null,0,o.Bb,[u.h,u.k,u.z],null,null),(l()(),u.Lb(-1,0,["\u8ba2\u5355"])),(l()(),u.tb(13,0,null,0,6,"ion-buttons",[["slot","primary"]],null,null,null,d.R,d.f)),u.sb(14,49152,null,0,o.m,[u.h,u.k,u.z],null,null),(l()(),u.tb(15,0,null,0,4,"ion-button",[["class","red-right"],["routerLink","/"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==u.Fb(l,17).onClick()&&e),"click"===n&&(e=!1!==u.Fb(l,18).onClick(t)&&e),e}),d.Q,d.e)),u.sb(16,49152,null,0,o.l,[u.h,u.k,u.z],null,null),u.sb(17,16384,null,0,f.n,[f.m,f.a,[8,null],u.D,u.k],{routerLink:[0,"routerLink"]},null),u.sb(18,737280,null,0,o.Mb,[h.h,o.Jb,u.k,f.m,[2,f.n]],null,null),(l()(),u.Lb(-1,0,["\u8fd4\u56de\u9996\u9875"])),(l()(),u.tb(20,0,null,null,33,"ion-content",[["class","content"]],null,null,null,d.U,d.i)),u.sb(21,49152,null,0,o.v,[u.h,u.k,u.z],null,null),(l()(),u.tb(22,0,null,0,23,"ion-segment",[],null,[[null,"ionChange"],[null,"ionBlur"]],(function(l,n,t){var e=!0,i=l.component;return"ionBlur"===n&&(e=!1!==u.Fb(l,25)._handleBlurEvent(t.target)&&e),"ionChange"===n&&(e=!1!==u.Fb(l,25)._handleChangeEvent(t.target)&&e),"ionChange"===n&&(e=!1!==i.segmentChanged(t)&&e),e}),d.mb,d.z)),u.Ib(5120,null,p.h,(function(l){return[l]}),[o.Nb]),u.sb(24,49152,null,0,o.mb,[u.h,u.k,u.z],{value:[0,"value"]},null),u.sb(25,16384,null,0,o.Nb,[u.k],null,null),(l()(),u.tb(26,0,null,0,4,"ion-segment-button",[["value","0"]],null,null,null,d.lb,d.A)),u.sb(27,49152,null,0,o.nb,[u.h,u.k,u.z],{value:[0,"value"]},null),(l()(),u.tb(28,0,null,0,2,"ion-label",[],null,null,null,d.fb,d.t)),u.sb(29,49152,null,0,o.O,[u.h,u.k,u.z],null,null),(l()(),u.Lb(-1,0,["\u5f85\u4ed8\u6b3e"])),(l()(),u.tb(31,0,null,0,4,"ion-segment-button",[["value","1"]],null,null,null,d.lb,d.A)),u.sb(32,49152,null,0,o.nb,[u.h,u.k,u.z],{value:[0,"value"]},null),(l()(),u.tb(33,0,null,0,2,"ion-label",[],null,null,null,d.fb,d.t)),u.sb(34,49152,null,0,o.O,[u.h,u.k,u.z],null,null),(l()(),u.Lb(-1,0,["\u5f85\u6536\u8d27"])),(l()(),u.tb(36,0,null,0,4,"ion-segment-button",[["value","2"]],null,null,null,d.lb,d.A)),u.sb(37,49152,null,0,o.nb,[u.h,u.k,u.z],{value:[0,"value"]},null),(l()(),u.tb(38,0,null,0,2,"ion-label",[],null,null,null,d.fb,d.t)),u.sb(39,49152,null,0,o.O,[u.h,u.k,u.z],null,null),(l()(),u.Lb(-1,0,["\u5df1\u6536\u8d27"])),(l()(),u.tb(41,0,null,0,4,"ion-segment-button",[["value","3"]],null,null,null,d.lb,d.A)),u.sb(42,49152,null,0,o.nb,[u.h,u.k,u.z],{value:[0,"value"]},null),(l()(),u.tb(43,0,null,0,2,"ion-label",[],null,null,null,d.fb,d.t)),u.sb(44,49152,null,0,o.O,[u.h,u.k,u.z],null,null),(l()(),u.Lb(-1,0,["\u5168\u90e8"])),(l()(),u.ib(16777216,null,0,1,null,v)),u.sb(47,16384,null,0,h.j,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,0,1,null,z)),u.sb(49,278528,null,0,h.i,[u.O,u.L,u.s],{ngForOf:[0,"ngForOf"]},null),(l()(),u.tb(50,0,null,0,3,"ion-infinite-scroll",[["threshold","100px"]],null,[[null,"ionInfinite"]],(function(l,n,t){var u=!0;return"ionInfinite"===n&&(u=!1!==l.component.doInfinite(t)&&u),u}),d.cb,d.p)),u.sb(51,49152,null,0,o.F,[u.h,u.k,u.z],{threshold:[0,"threshold"]},null),(l()(),u.tb(52,0,null,0,1,"ion-infinite-scroll-content",[["loadingSpinner","bubbles"],["loadingText","\u52a0\u8f7d\u66f4\u591a\u4e2d..."]],null,null,null,d.bb,d.q)),u.sb(53,49152,null,0,o.G,[u.h,u.k,u.z],{loadingSpinner:[0,"loadingSpinner"],loadingText:[1,"loadingText"]},null)],(function(l,n){var t=n.component;l(n,8,0,"md"),l(n,17,0,"/"),l(n,18,0),l(n,24,0,u.xb(1,"",t.selected,"")),l(n,27,0,"0"),l(n,32,0,"1"),l(n,37,0,"2"),l(n,42,0,"3"),l(n,47,0,0==t.orders.length),l(n,49,0,t.orders),l(n,51,0,"100px"),l(n,53,0,"bubbles","\u52a0\u8f7d\u66f4\u591a\u4e2d...")}),null)}function C(l){return u.Nb(0,[(l()(),u.tb(0,0,null,null,1,"app-orders",[],null,null,null,L,m)),u.sb(1,114688,null,0,b,[g.b,o.Ib,o.Jb,s.a,f.a,r.a],null,null)],(function(l,n){l(n,1,0)}),null)}var S=u.pb("app-orders",b,C,{},{},[]);t.d(n,"OrdersPageModuleNgFactory",(function(){return I}));var I=u.qb(c,[],(function(l){return u.Cb([u.Db(512,u.j,u.bb,[[8,[a.a,S]],[3,u.j],u.x]),u.Db(4608,h.l,h.k,[u.u,[2,h.r]]),u.Db(4608,p.p,p.p,[]),u.Db(4608,o.b,o.b,[u.z,u.g]),u.Db(4608,o.Ib,o.Ib,[o.b,u.j,u.q]),u.Db(4608,o.Lb,o.Lb,[o.b,u.j,u.q]),u.Db(1073742336,h.b,h.b,[]),u.Db(1073742336,p.o,p.o,[]),u.Db(1073742336,p.e,p.e,[]),u.Db(1073742336,o.Fb,o.Fb,[]),u.Db(1073742336,f.o,f.o,[[2,f.t],[2,f.m]]),u.Db(1073742336,c,c,[]),u.Db(1024,f.k,(function(){return[[{path:"",component:b}]]}),[])])}))}}]);